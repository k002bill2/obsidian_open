{
  "frames": [
    {
      "url": "https://notebooklm.google.com/",
      "displayName": "Notebooklm",
      "icon": "notebook",
      "hideOnMobile": true,
      "addRibbonIcon": true,
      "openInCenter": false,
      "zoomLevel": 1,
      "forceIframe": false,
      "customCss": "",
      "customJs": "/**\n * NotebookLM to Obsidian - Custom Frames Edition\n *\n * Obsidian Custom Frames í”ŒëŸ¬ê·¸ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìˆœìˆ˜ JavaScript ìŠ¤í¬ë¦½íŠ¸\n * Tampermonkey API ì—†ì´ fetch()ë¡œ Obsidian Local REST API í†µì‹ \n *\n * @version 3.1.0 - NotebookLM ì‹¤ì œ DOM êµ¬ì¡° ê¸°ë°˜ íŒŒì‹±\n * @author Claude Code\n */\n\n(function() {\n    'use strict';\n\n    // ========================================\n    // ì„¤ì •\n    // ========================================\n    const CONFIG = {\n        obsidianApiUrl: 'http://127.0.0.1:27123',\n        obsidianApiKey: '171c9f4842fe5b6476229473af33bfe4392514641d6fd98fa55283bb04e36db2',\n        targetFolder: 'NotebookLM',\n        autoTags: ['notebooklm', 'imported'],\n        showNotification: true\n    };\n\n    console.log('[NotebookLMâ†’Obsidian CF] ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ (Custom Frames v3.1.0 - DEBUG)');\n    console.log('[NotebookLMâ†’Obsidian CF] iframe í™˜ê²½:', window !== window.top);\n\n    // ========================================\n    // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\n    // ========================================\n\n    /**\n     * ì•Œë¦¼ í‘œì‹œ\n     */\n    function showNotification(message, type = 'info') {\n        if (!CONFIG.showNotification) return;\n\n        const notification = document.createElement('div');\n        notification.style.cssText = `\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 15px 20px;\n            background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};\n            color: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            z-index: 10000;\n            font-family: 'Google Sans', Arial, sans-serif;\n            font-size: 14px;\n            max-width: 350px;\n            animation: slideIn 0.3s ease-out;\n        `;\n        notification.textContent = message;\n\n        document.body.appendChild(notification);\n\n        setTimeout(() => {\n            notification.style.animation = 'slideOut 0.3s ease-out';\n            setTimeout(() => notification.remove(), 300);\n        }, 3000);\n    }\n\n    /**\n     * NotebookLM í…Œì´ë¸”ì„ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜ (Angular ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ëŒ€ì‘)\n     */\n    function convertTableToMarkdown(table) {\n        const rows = Array.from(table.querySelectorAll('tr'));\n\n        if (rows.length === 0) {\n            return '';\n        }\n\n        const tableData = rows.map(tr => {\n            const cells = Array.from(tr.querySelectorAll('th, td'));\n            return cells.map(cell => {\n                // NotebookLM í…Œì´ë¸”: div.paragraph ë‚´ë¶€ì˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ\n                const paragraphs = cell.querySelectorAll('div.paragraph');\n                if (paragraphs.length > 0) {\n                    // ê° paragraphì˜ í…ìŠ¤íŠ¸ë¥¼ ê³µë°±ìœ¼ë¡œ ì—°ê²°\n                    const cellText = Array.from(paragraphs)\n                        .map(p => p.innerText.trim())\n                        .join(' ')\n                        .replace(/\\n/g, ' ')  // ì¤„ë°”ê¿ˆì„ ê³µë°±ìœ¼ë¡œ\n                        .replace(/\\|/g, '\\\\|');  // íŒŒì´í”„ ì´ìŠ¤ì¼€ì´í”„\n                    return cellText;\n                }\n                // ì¼ë°˜ HTML í…Œì´ë¸” fallback\n                return cell.innerText.trim().replace(/\\n/g, ' ').replace(/\\|/g, '\\\\|');\n            });\n        });\n\n        const filteredData = tableData.filter(row => row.some(cell => cell));\n\n        if (filteredData.length === 0) {\n            return '';\n        }\n\n        const maxColumns = Math.max(...filteredData.map(row => row.length));\n\n        const normalizedData = filteredData.map(row => {\n            while (row.length < maxColumns) {\n                row.push('');\n            }\n            return row;\n        });\n\n        const header = normalizedData[0];\n        const dataRows = normalizedData.slice(1);\n\n        const headerLine = '| ' + header.join(' | ') + ' |';\n        const separatorLine = '| ' + header.map(() => '---').join(' | ') + ' |';\n        const dataLines = dataRows.map(row => '| ' + row.join(' | ') + ' |');\n\n        return [headerLine, separatorLine, ...dataLines].join('\\n');\n    }\n\n    // DOM êµ¬ì¡° ë””ë²„ê¹… í•¨ìˆ˜\n    function debugDOMStructure(element, prefix = '', maxDepth = 3, currentDepth = 0) {\n        if (currentDepth > maxDepth) return;\n\n        const tagName = element.tagName?.toLowerCase() || 'text';\n        const className = element.className ? `.${element.className.split(' ').join('.')}` : '';\n        const id = element.id ? `#${element.id}` : '';\n        const text = element.nodeType === Node.TEXT_NODE\n            ? element.textContent.trim().substring(0, 50)\n            : '';\n\n        if (element.nodeType === Node.TEXT_NODE && text) {\n            console.log(`${prefix}[TEXT] \"${text}\"`);\n        } else if (element.nodeType === Node.ELEMENT_NODE) {\n            console.log(`${prefix}<${tagName}${id}${className}>`);\n\n            for (const child of element.childNodes) {\n                debugDOMStructure(child, prefix + '  ', maxDepth, currentDepth + 1);\n            }\n        }\n    }\n\n    /**\n     * NotebookLM ì „ìš© ë§ˆí¬ë‹¤ìš´ ë³€í™˜ (ì‹¤ì œ DOM êµ¬ì¡° ê¸°ë°˜)\n     */\n    function convertNotebookLMToMarkdown(noteEditor) {\n        let markdown = '';\n\n        // 1. í…Œì´ë¸” ë¨¼ì € ì²˜ë¦¬\n        const tables = noteEditor.querySelectorAll('table');\n        const processedTables = new Set();\n\n        for (const table of tables) {\n            const mdTable = convertTableToMarkdown(table);\n            if (mdTable) {\n                markdown += '\\n\\n' + mdTable + '\\n\\n';\n                processedTables.add(table);\n                console.log('[NotebookLMâ†’Obsidian CF] í…Œì´ë¸” ë³€í™˜ ì™„ë£Œ');\n            }\n        }\n\n        // 2. ë¬¸ë‹¨ ì²˜ë¦¬ (í…Œì´ë¸” ë‚´ë¶€ ìš”ì†ŒëŠ” ì œì™¸)\n        const paragraphs = noteEditor.querySelectorAll('div.paragraph');\n\n        for (const para of paragraphs) {\n            // í…Œì´ë¸” ë‚´ë¶€ì˜ paragraphëŠ” ê±´ë„ˆë›°ê¸°\n            let isInsideTable = false;\n            for (const table of processedTables) {\n                if (table.contains(para)) {\n                    isInsideTable = true;\n                    break;\n                }\n            }\n            if (isInsideTable) continue;\n\n            const classList = Array.from(para.classList);\n\n            // í—¤ë”© ì²˜ë¦¬\n            if (classList.includes('heading3')) {\n                const text = para.innerText.trim();\n                markdown += '\\n\\n## ' + text + '\\n\\n';\n                continue;\n            }\n\n            // ì¼ë°˜ ë¬¸ë‹¨ ì²˜ë¦¬\n            if (classList.includes('normal')) {\n                let lineText = '';\n\n                for (const child of para.childNodes) {\n                    if (child.nodeType === Node.TEXT_NODE) {\n                        lineText += child.textContent;\n                    } else if (child.nodeType === Node.ELEMENT_NODE) {\n                        const tag = child.tagName.toLowerCase();\n\n                        if (tag === 'b' || tag === 'strong') {\n                            lineText += '**' + child.innerText.trim() + '**';\n                        } else if (tag === 'code') {\n                            lineText += '`' + child.innerText.trim() + '`';\n                        } else if (tag === 'span') {\n                            // ì¸ìš© ë²„íŠ¼ì´ í¬í•¨ëœ spanì€ ê±´ë„ˆë›°ê¸°\n                            if (child.querySelector('button.citation-marker')) {\n                                continue;\n                            }\n                            lineText += child.textContent;\n                        } else if (tag === 'button' && child.classList.contains('citation-marker')) {\n                            // ì¸ìš© ë²ˆí˜¸ ê±´ë„ˆë›°ê¸° (ì´ë¯¸ ì›ë¬¸ì— í¬í•¨ë¨)\n                            continue;\n                        } else {\n                            lineText += child.innerText || child.textContent || '';\n                        }\n                    }\n                }\n\n                lineText = lineText.trim();\n\n                // ë¶ˆë¦¿ í¬ì¸íŠ¸ ê°ì§€ ë° ì²˜ë¦¬\n                if (lineText.startsWith('â€¢ ') || lineText.startsWith('Â· ')) {\n                    markdown += lineText + '\\n';\n                } else if (/^\\d+\\.\\s/.test(lineText)) {\n                    // ë²ˆí˜¸ ëª©ë¡\n                    markdown += lineText + '\\n';\n                } else if (lineText) {\n                    markdown += '\\n' + lineText + '\\n';\n                }\n            }\n        }\n\n        return markdown.trim();\n    }\n\n    /**\n     * ë§ˆí¬ë‹¤ìš´ ì •ë¦¬ (NotebookLM ì›ë³¸ í˜•ì‹ ìœ ì§€)\n     */\n    function cleanupMarkdown(markdown) {\n        return markdown\n            // 1. ì¤‘ì  ë¶ˆë¦¿ ì‚¬ì´ì˜ ë¶ˆí•„ìš”í•œ ë¹ˆ ì¤„ ì œê±°\n            .replace(/(Â·[^\\n]+)\\n\\n+(Â·)/g, '$1\\n$2')\n\n            // 2. ë“¤ì—¬ì“°ê¸°ëœ ì¤‘ì  ë¶ˆë¦¿ ì‚¬ì´ì˜ ë¹ˆ ì¤„ ì œê±°\n            .replace(/(\\s+Â·[^\\n]+)\\n\\n+(\\s+Â·)/g, '$1\\n$2')\n\n            // 3. 3ì¤„ ì´ìƒ ë¹ˆ ì¤„ -> 2ì¤„ë¡œ\n            .replace(/\\n{3,}/g, '\\n\\n')\n\n            // 4. ì•ë’¤ ê³µë°± ì œê±°\n            .replace(/^\\s+/, '')\n            .replace(/\\s+$/, '');\n    }\n\n    /**\n     * NotebookLM ë…¸íŠ¸ ë‚´ìš© ì¶”ì¶œ (ì›ë³¸ í˜•ì‹ ì¬í˜„)\n     */\n    function extractNotebookContent() {\n        console.log('[NotebookLMâ†’Obsidian CF] ğŸ” ì½˜í…ì¸  ì¶”ì¶œ ì‹œì‘ (v3.1.0 DEBUG)');\n\n        // NOTE-EDITOR ì°¾ê¸°\n        let noteEditor = document.querySelector('.note-editor');\n        if (!noteEditor) {\n            noteEditor = document.querySelector('.artifact-content');\n        }\n        if (!noteEditor) {\n            noteEditor = document.querySelector('labs-tailwind-doc-viewer');\n        }\n        if (!noteEditor) {\n            noteEditor = document.querySelector('note-editor');\n        }\n\n        if (!noteEditor) {\n            console.error('[NotebookLMâ†’Obsidian CF] NOTE-EDITORë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n            return { title: 'ë¬´ì œ ë…¸íŠ¸', content: '' };\n        }\n\n        // ğŸ” DOM êµ¬ì¡° ë””ë²„ê¹… (ì²« ë²ˆì§¸ ë¦¬ìŠ¤íŠ¸ í•­ëª©)\n        console.log('\\n===== DOM êµ¬ì¡° ë””ë²„ê¹… ì‹œì‘ =====');\n        const firstList = noteEditor.querySelector('ul, ol');\n        if (firstList) {\n            const firstLi = firstList.querySelector('li');\n            if (firstLi) {\n                console.log('ì²« ë²ˆì§¸ ë¦¬ìŠ¤íŠ¸ í•­ëª© êµ¬ì¡°:');\n                debugDOMStructure(firstLi, '', 5);\n            }\n        }\n        console.log('===== DOM êµ¬ì¡° ë””ë²„ê¹… ì¢…ë£Œ =====\\n');\n\n        // ì œëª© ì¶”ì¶œ\n        let title = 'ë¬´ì œ ë…¸íŠ¸';\n        let titleInput = document.querySelector('input.note-header__editable-title') ||\n                         noteEditor.querySelector('input.note-header__editable-title');\n        if (!titleInput) {\n            titleInput = document.querySelector('input.artifact-title');\n        }\n\n        if (titleInput && titleInput.value) {\n            title = titleInput.value.trim();\n        } else {\n            const pageTitle = document.title.replace(' - NotebookLM', '').trim();\n            if (pageTitle && pageTitle !== 'NotebookLM') {\n                title = pageTitle;\n            }\n        }\n\n        console.log('[NotebookLMâ†’Obsidian CF] ì œëª©:', title);\n\n        // NotebookLM ì „ìš© ë§ˆí¬ë‹¤ìš´ ë³€í™˜ ì‚¬ìš©\n        let content = convertNotebookLMToMarkdown(noteEditor);\n        content = cleanupMarkdown(content);\n\n        // ì¸ìš© ì •ë³´ ì¶”ê°€\n        const citationButtons = noteEditor.querySelectorAll('button.citation-marker');\n        const citationCount = citationButtons.length;\n\n        if (citationCount > 0) {\n            content += '\\n\\n---\\n\\n## ğŸ“š ì¸ìš© ì •ë³´\\n\\n';\n            content += `> ì´ ë¬¸ì„œì—ëŠ” **${citationCount}ê°œ**ì˜ ì¸ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\\n`;\n            content += `> NotebookLMì—ì„œ ê° ë²ˆí˜¸ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì¶œì²˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n`;\n        }\n\n        // ì œëª© ì¤‘ë³µ ì œê±°\n        if (title !== 'ë¬´ì œ ë…¸íŠ¸') {\n            const lines = content.split('\\n');\n            // ì²« ì¤„ì´ ì œëª©ê³¼ ë™ì¼í•˜ê±°ë‚˜ # ì œëª© í˜•ì‹ì¸ ê²½ìš° ì œê±°\n            if (lines[0].trim() === title.trim() || lines[0].trim() === '# ' + title.trim()) {\n                lines.shift();\n                content = lines.join('\\n').trim();\n            }\n        }\n\n        console.log('[NotebookLMâ†’Obsidian CF] ë‚´ìš© ê¸¸ì´:', content.length);\n        console.log('[NotebookLMâ†’Obsidian CF] ìƒ˜í”Œ:', content.substring(0, 500));\n\n        return { title, content };\n    }\n\n    /**\n     * Markdown íŒŒì¼ ìƒì„±\n     */\n    function createMarkdown(title, content) {\n        const now = new Date();\n        const dateStr = now.toISOString().split('T')[0];\n        const timeStr = now.toTimeString().split(' ')[0];\n\n        const frontmatter = `---\ncreated: ${dateStr} ${timeStr}\nsource: NotebookLM\ntags: [${CONFIG.autoTags.join(', ')}]\n---\n\n`;\n\n        return frontmatter + `# ${title}\\n\\n${content}`;\n    }\n\n    /**\n     * Obsidianì— ì €ì¥ (fetch ì‚¬ìš©)\n     */\n    async function saveToObsidian(title, markdown) {\n        const now = new Date();\n        const timestamp = now.toISOString().replace(/[:.]/g, '-').split('T')[0];\n        const filename = `${title.replace(/[/\\\\:*?\"<>|]/g, '_')} ${timestamp}.md`;\n        const filepath = `${CONFIG.targetFolder}/${filename}`;\n\n        const url = `${CONFIG.obsidianApiUrl}/vault/${encodeURIComponent(filepath)}`;\n\n        console.log('[NotebookLMâ†’Obsidian CF] ì €ì¥ URL:', url);\n\n        try {\n            const response = await fetch(url, {\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Bearer ${CONFIG.obsidianApiKey}`,\n                    'Content-Type': 'text/markdown'\n                },\n                body: markdown\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            console.log('[NotebookLMâ†’Obsidian CF] âœ… ì €ì¥ ì„±ê³µ:', filename);\n            return filename;\n\n        } catch (error) {\n            console.error('[NotebookLMâ†’Obsidian CF] âŒ ì €ì¥ ì‹¤íŒ¨:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * ë©”ì¸ ì €ì¥ í•¨ìˆ˜\n     */\n    async function handleSaveToObsidian() {\n        try {\n            showNotification('ğŸ“ NotebookLM ë‚´ìš© ì¶”ì¶œ ì¤‘...', 'info');\n\n            const { title, content } = extractNotebookContent();\n\n            if (!content || content.length < 10) {\n                showNotification('âŒ ì¶”ì¶œí•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');\n                return;\n            }\n\n            const markdown = createMarkdown(title, content);\n\n            showNotification('ğŸ’¾ Obsidianì— ì €ì¥ ì¤‘...', 'info');\n            const filename = await saveToObsidian(title, markdown);\n\n            showNotification(`âœ… ì €ì¥ ì™„ë£Œ: ${filename}`, 'success');\n\n        } catch (error) {\n            console.error('[NotebookLMâ†’Obsidian CF] ì˜¤ë¥˜:', error);\n            showNotification(`âŒ ì €ì¥ ì‹¤íŒ¨: ${error.message}`, 'error');\n        }\n    }\n\n    // ========================================\n    // ë²„íŠ¼ ì¶”ê°€\n    // ========================================\n\n    /**\n     * Obsidian ì €ì¥ ë²„íŠ¼ ì¶”ê°€\n     */\n    function addObsidianButton() {\n        if (document.querySelector('#obsidian-save-btn-cf')) {\n            return;\n        }\n\n        const button = document.createElement('button');\n        button.id = 'obsidian-save-btn-cf';\n        button.textContent = 'ğŸ““ Obsidianì— ì €ì¥';\n        button.style.cssText = `\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            padding: 12px 24px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 500;\n            cursor: pointer;\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n            z-index: 9999;\n            font-family: 'Google Sans', Arial, sans-serif;\n            transition: transform 0.2s, box-shadow 0.2s;\n        `;\n\n        button.addEventListener('mouseenter', () => {\n            button.style.transform = 'translateY(-2px)';\n            button.style.boxShadow = '0 6px 16px rgba(102, 126, 234, 0.5)';\n        });\n\n        button.addEventListener('mouseleave', () => {\n            button.style.transform = 'translateY(0)';\n            button.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.4)';\n        });\n\n        button.addEventListener('click', handleSaveToObsidian);\n\n        document.body.appendChild(button);\n        console.log('[NotebookLMâ†’Obsidian CF] ì €ì¥ ë²„íŠ¼ ì¶”ê°€ë¨');\n    }\n\n    // ========================================\n    // ì´ˆê¸°í™”\n    // ========================================\n\n    // CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€\n    const style = document.createElement('style');\n    style.textContent = `\n        @keyframes slideIn {\n            from { transform: translateX(400px); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        @keyframes slideOut {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(400px); opacity: 0; }\n        }\n    `;\n    document.head.appendChild(style);\n\n    // í˜ì´ì§€ ë¡œë“œ í›„ ë²„íŠ¼ ì¶”ê°€\n    function init() {\n        console.log('[NotebookLMâ†’Obsidian CF] ì´ˆê¸°í™” ì‹œì‘');\n        \n        // ë²„íŠ¼ ì¶”ê°€\n        addObsidianButton();\n\n        // MutationObserverë¡œ ë™ì  ë³€ê²½ ê°ì§€\n        const observer = new MutationObserver(() => {\n            addObsidianButton();\n        });\n\n        observer.observe(document.body, {\n            childList: true,\n            subtree: true\n        });\n\n        console.log('[NotebookLMâ†’Obsidian CF] âœ… ì´ˆê¸°í™” ì™„ë£Œ');\n    }\n\n    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì•½ê°„ ì§€ì—° í›„ ì‹¤í–‰\n        setTimeout(init, 1000);\n    }\n\n})();\n"
    },
    {
      "url": "https://www.google.com/search?q=&rlz=1C5BAPC_enKR1167KR1167&sourceid=chrome&ie=UTF-8&udm=50&aep=48&cud=0&qsubts=1766310841610",
      "displayName": "Google AI",
      "icon": "bot",
      "hideOnMobile": true,
      "addRibbonIcon": true,
      "openInCenter": false,
      "zoomLevel": 1,
      "forceIframe": false,
      "customCss": "",
      "customJs": ""
    }
  ],
  "padding": 5
}