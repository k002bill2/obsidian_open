{
  "frames": [
    {
      "url": "https://notebooklm.google.com/",
      "displayName": "New Frame",
      "icon": "notebook",
      "hideOnMobile": true,
      "addRibbonIcon": true,
      "openInCenter": false,
      "zoomLevel": 1,
      "forceIframe": false,
      "customCss": "",
      "customJs": "/**\n * NotebookLM to Obsidian - Custom Frames Edition\n *\n * Obsidian Custom Frames í”ŒëŸ¬ê·¸ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìˆœìˆ˜ JavaScript ìŠ¤í¬ë¦½íŠ¸\n * Tampermonkey API ì—†ì´ fetch()ë¡œ Obsidian Local REST API í†µì‹ \n *\n * @version 1.4.0 - ë²ˆí˜¸/bullet ëª©ë¡ ì¤„ë°”ê¿ˆ ë° í¬ë§· ê°œì„  + ng-star-inserted ì œê±°\n * @author Claude Code\n */\n\n(function() {\n    'use strict';\n\n    // ========================================\n    // ì„¤ì •\n    // ========================================\n    const CONFIG = {\n        obsidianApiUrl: 'http://127.0.0.1:27123',\n        obsidianApiKey: '171c9f4842fe5b6476229473af33bfe4392514641d6fd98fa55283bb04e36db2',\n        targetFolder: 'NotebookLM',\n        autoTags: ['notebooklm', 'imported'],\n        showNotification: true\n    };\n\n    console.log('[NotebookLMâ†’Obsidian CF] ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ (Custom Frames v1.4.0)');\n    console.log('[NotebookLMâ†’Obsidian CF] iframe í™˜ê²½:', window !== window.top);\n\n    // ========================================\n    // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\n    // ========================================\n\n    /**\n     * ì•Œë¦¼ í‘œì‹œ\n     */\n    function showNotification(message, type = 'info') {\n        if (!CONFIG.showNotification) return;\n\n        const notification = document.createElement('div');\n        notification.style.cssText = `\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 15px 20px;\n            background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};\n            color: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            z-index: 10000;\n            font-family: 'Google Sans', Arial, sans-serif;\n            font-size: 14px;\n            max-width: 350px;\n            animation: slideIn 0.3s ease-out;\n        `;\n        notification.textContent = message;\n\n        document.body.appendChild(notification);\n\n        setTimeout(() => {\n            notification.style.animation = 'slideOut 0.3s ease-out';\n            setTimeout(() => notification.remove(), 300);\n        }, 3000);\n    }\n\n    /**\n     * ë‹¨ì¼ HTML tableì„ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜\n     */\n    function convertTableToMarkdown(table) {\n        const rows = Array.from(table.querySelectorAll('tr'));\n        \n        if (rows.length === 0) {\n            return '';\n        }\n\n        const tableData = rows.map(tr => {\n            const cells = Array.from(tr.querySelectorAll('th, td'));\n            return cells.map(cell => {\n                // ì…€ ë‚´ìš©ì—ì„œ ì¤„ë°”ê¿ˆì„ ê³µë°±ìœ¼ë¡œ, íŒŒì´í”„ ë¬¸ì ì´ìŠ¤ì¼€ì´í”„\n                return cell.innerText.trim().replace(/\\n/g, ' ').replace(/\\|/g, '\\\\|');\n            });\n        });\n\n        const filteredData = tableData.filter(row => row.some(cell => cell));\n\n        if (filteredData.length === 0) {\n            return '';\n        }\n\n        const maxColumns = Math.max(...filteredData.map(row => row.length));\n\n        const normalizedData = filteredData.map(row => {\n            while (row.length < maxColumns) {\n                row.push('');\n            }\n            return row;\n        });\n\n        const header = normalizedData[0];\n        const dataRows = normalizedData.slice(1);\n\n        const headerLine = '| ' + header.join(' | ') + ' |';\n        const separatorLine = '| ' + header.map(() => '---').join(' | ') + ' |';\n        const dataLines = dataRows.map(row => '| ' + row.join(' | ') + ' |');\n\n        return [headerLine, separatorLine, ...dataLines].join('\\n');\n    }\n\n    /**\n     * DOM ë…¸ë“œë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜ (ì¬ê·€ì )\n     */\n    function nodeToMarkdown(node, depth = 0) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            return node.textContent;\n        }\n\n        if (node.nodeType !== Node.ELEMENT_NODE) {\n            return '';\n        }\n\n        const tagName = node.tagName.toLowerCase();\n\n        // í…Œì´ë¸” ì²˜ë¦¬ - í•µì‹¬ ìˆ˜ì •!\n        if (tagName === 'table') {\n            const mdTable = convertTableToMarkdown(node);\n            console.log('[NotebookLMâ†’Obsidian CF] í…Œì´ë¸” ë³€í™˜:', mdTable.substring(0, 100) + '...');\n            return '\\n\\n' + mdTable + '\\n\\n';\n        }\n\n        // í—¤ë”© ì²˜ë¦¬\n        if (/^h[1-6]$/.test(tagName)) {\n            const level = parseInt(tagName.charAt(1));\n            const text = node.innerText.trim();\n            return '\\n\\n' + '#'.repeat(level) + ' ' + text + '\\n\\n';\n        }\n\n        // ë‹¨ë½ ì²˜ë¦¬\n        if (tagName === 'p') {\n            const content = Array.from(node.childNodes).map(child => nodeToMarkdown(child, depth)).join('');\n            return '\\n\\n' + content.trim() + '\\n\\n';\n        }\n\n        // ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬ (ê°œì„ : í•˜ìœ„ í•­ëª© í¬ë§· ìœ ì§€)\n        if (tagName === 'ul' || tagName === 'ol') {\n            const items = Array.from(node.querySelectorAll(':scope > li'));\n            const listContent = items.map((li, idx) => {\n                const prefix = tagName === 'ol' ? `${idx + 1}. ` : 'â€¢ ';\n\n                // li ë‚´ìš©ì—ì„œ ì¤‘ì²©ëœ ë¦¬ìŠ¤íŠ¸ë‚˜ êµµì€ ê¸€ì”¨ íŒ¨í„´ í™•ì¸\n                const hasNestedContent = li.querySelector('ul, ol, strong, b');\n\n                if (hasNestedContent) {\n                    // ì¤‘ì²© êµ¬ì¡°ê°€ ìˆìœ¼ë©´ ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬\n                    let content = Array.from(li.childNodes).map(child => {\n                        if (child.nodeType === Node.TEXT_NODE) {\n                            return child.textContent.trim();\n                        }\n                        return nodeToMarkdown(child, depth + 1);\n                    }).join('').trim();\n\n                    // ng-star-inserted ê°™ì€ ì†ì„±ëª…ì´ í…ìŠ¤íŠ¸ë¡œ ë“¤ì–´ê°„ ê²½ìš° ì œê±°\n                    content = content.replace(/ng-star-inserted/g, '').trim();\n\n                    return prefix + content;\n                } else {\n                    // ë‹¨ìˆœ í…ìŠ¤íŠ¸ëŠ” í•œ ì¤„ë¡œ\n                    let text = li.innerText.trim().replace(/\\n/g, ' ');\n                    // ng-star-inserted ì œê±°\n                    text = text.replace(/ng-star-inserted/g, '').trim();\n                    return prefix + text;\n                }\n            }).join('\\n');\n            return '\\n\\n' + listContent + '\\n\\n';\n        }\n\n        // êµµì€ ê¸€ì”¨\n        if (tagName === 'strong' || tagName === 'b') {\n            return '**' + node.innerText + '**';\n        }\n\n        // ê¸°ìš¸ì„\n        if (tagName === 'em' || tagName === 'i') {\n            return '*' + node.innerText + '*';\n        }\n\n        // ì½”ë“œ\n        if (tagName === 'code') {\n            return '`' + node.innerText + '`';\n        }\n\n        // ë§í¬\n        if (tagName === 'a') {\n            const href = node.getAttribute('href') || '';\n            const text = node.innerText;\n            return `[${text}](${href})`;\n        }\n\n        // ì¤„ë°”ê¿ˆ\n        if (tagName === 'br') {\n            return '\\n';\n        }\n\n        // HR\n        if (tagName === 'hr') {\n            return '\\n\\n---\\n\\n';\n        }\n\n        // DIV, SECTION ë“±ì˜ ì»¨í…Œì´ë„ˆ - ìì‹ ë…¸ë“œ ìˆœíšŒ\n        if (['div', 'section', 'article', 'span', 'main', 'aside'].includes(tagName)) {\n            return Array.from(node.childNodes).map(child => nodeToMarkdown(child, depth)).join('');\n        }\n\n        // tbody, thead ë“± í…Œì´ë¸” ë‚´ë¶€ ìš”ì†ŒëŠ” ê±´ë„ˆë›°ê¸° (tableì—ì„œ ì§ì ‘ ì²˜ë¦¬)\n        if (['tbody', 'thead', 'tfoot', 'tr', 'th', 'td'].includes(tagName)) {\n            return '';\n        }\n\n        // ê¸°íƒ€: ìì‹ ë…¸ë“œ ì²˜ë¦¬\n        return Array.from(node.childNodes).map(child => nodeToMarkdown(child, depth)).join('');\n    }\n\n    /**\n     * ì—°ì†ëœ ë¹ˆ ì¤„ ì •ë¦¬ ë° ë²ˆí˜¸ ëª©ë¡ í˜•ì‹ ê°œì„ \n     */\n    function cleanupMarkdown(markdown) {\n        return markdown\n            // ë²ˆí˜¸ ëª©ë¡ í•­ëª© ë’¤ ë‚´ìš©ì´ ë°”ë¡œ ë¶™ëŠ” ê²½ìš° ì²˜ë¦¬ (ì˜ˆ: \"1. ì œëª©?**ë‚´ìš©**\")\n            .replace(/([0-9]+\\.\\s+[^\\n]+?)(\\*\\*[^*]+\\*\\*)/g, '$1\\n\\n$2')\n            // ë²ˆí˜¸ ëª©ë¡ íŒ¨í„´ ì•ì— ì¤„ë°”ê¿ˆ ì¶”ê°€ (ì •ê·œì‹ ìˆœì„œ ë³€ê²½)\n            // 1. ë¨¼ì € ë²ˆí˜¸+ì†Œìˆ˜ì  íŒ¨í„´ (1.1, 2.3 ë“±)\n            .replace(/([^\\n])(\\n?)([0-9]+\\.[0-9]+\\.?\\s+)/g, '$1\\n\\n$3')\n            // 2. ì¼ë°˜ ë²ˆí˜¸ ëª©ë¡ (1. 2. 3.)\n            .replace(/([^\\n])(\\n?)([0-9]+\\.\\s+[A-Zê°€-í£])/g, '$1\\n\\n$3')\n            // bullet ëª©ë¡ ì•ì— ì¤„ë°”ê¿ˆ ì¶”ê°€ (â€¢ ë˜ëŠ” - ë¡œ ì‹œì‘)\n            .replace(/([^\\n])(â€¢\\s+)/g, '$1\\n\\n$2')\n            .replace(/([^\\n])(-\\s+\\*\\*)/g, '$1\\n\\n$2')\n            // êµµì€ ê¸€ì”¨ë¡œ ì‹œì‘í•˜ëŠ” í•­ëª© ì•ì— ì¤„ë°”ê¿ˆ (â€¢ **í•­ëª©:** íŒ¨í„´)\n            .replace(/([^\\n])(â€¢\\s+\\*\\*)/g, '$1\\n$2')\n            // êµµì€ ê¸€ì”¨ ì œëª© íŒ¨í„´ ì•ì— ì¤„ë°”ê¿ˆ (**ì œëª©:** ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°)\n            .replace(/([^\\n])(\\*\\*[^*]+:\\*\\*)/g, '$1\\n\\n$2')\n            // 3ì¤„ ì´ìƒ ë¹ˆ ì¤„ -> 2ì¤„ë¡œ\n            .replace(/\\n{3,}/g, '\\n\\n')\n            // ì• ê³µë°± ì œê±°\n            .replace(/^\\s+/, '')\n            // ë’¤ ê³µë°± ì œê±°\n            .replace(/\\s+$/, '');\n    }\n\n    /**\n     * NotebookLM ë…¸íŠ¸ ë‚´ìš© ì¶”ì¶œ (ê°œì„ ëœ ë²„ì „)\n     */\n    function extractNotebookContent() {\n        console.log('[NotebookLMâ†’Obsidian CF] ğŸ” ì½˜í…ì¸  ì¶”ì¶œ ì‹œì‘ (v1.4.0)');\n\n        // NOTE-EDITOR ì°¾ê¸°\n        let noteEditor = document.querySelector('.note-editor');\n        if (!noteEditor) {\n            noteEditor = document.querySelector('.artifact-content');\n        }\n        if (!noteEditor) {\n            noteEditor = document.querySelector('labs-tailwind-doc-viewer');\n        }\n        if (!noteEditor) {\n            noteEditor = document.querySelector('note-editor');\n        }\n\n        console.log('[NotebookLMâ†’Obsidian CF] NOTE-EDITOR:', noteEditor ? 'âœ…' : 'âŒ');\n\n        if (!noteEditor) {\n            return { title: 'ë¬´ì œ ë…¸íŠ¸', content: '' };\n        }\n\n        // ì œëª© ì¶”ì¶œ\n        let title = 'ë¬´ì œ ë…¸íŠ¸';\n        let titleInput = document.querySelector('input.note-header__editable-title') || \n                         noteEditor.querySelector('input.note-header__editable-title');\n        if (!titleInput) {\n            titleInput = document.querySelector('input.artifact-title');\n        }\n\n        if (titleInput && titleInput.value) {\n            title = titleInput.value.trim();\n        } else {\n            const pageTitle = document.title.replace(' - NotebookLM', '').trim();\n            if (pageTitle && pageTitle !== 'NotebookLM') {\n                title = pageTitle;\n            }\n        }\n\n        console.log('[NotebookLMâ†’Obsidian CF] ì œëª©:', title);\n\n        // DOM ìˆœíšŒí•˜ì—¬ ë§ˆí¬ë‹¤ìš´ ìƒì„± (í•µì‹¬ ë³€ê²½!)\n        let content = nodeToMarkdown(noteEditor);\n        content = cleanupMarkdown(content);\n\n        // ì¸ìš© ì •ë³´ ì¶”ê°€\n        const citationButtons = noteEditor.querySelectorAll('button.citation-marker');\n        const citationCount = citationButtons.length;\n\n        if (citationCount > 0) {\n            content += '\\n\\n---\\n\\n## ğŸ“š ì¸ìš© ì •ë³´\\n\\n';\n            content += `> ì´ ë¬¸ì„œì—ëŠ” **${citationCount}ê°œ**ì˜ ì¸ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\\n`;\n            content += `> NotebookLMì—ì„œ ê° ë²ˆí˜¸ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì¶œì²˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n`;\n        }\n\n        // ì œëª© ì¤‘ë³µ ì œê±°\n        if (title !== 'ë¬´ì œ ë…¸íŠ¸') {\n            const lines = content.split('\\n');\n            // ì²« ì¤„ì´ ì œëª©ê³¼ ë™ì¼í•˜ê±°ë‚˜ # ì œëª© í˜•ì‹ì¸ ê²½ìš° ì œê±°\n            if (lines[0].trim() === title.trim() || lines[0].trim() === '# ' + title.trim()) {\n                lines.shift();\n                content = lines.join('\\n').trim();\n            }\n        }\n\n        console.log('[NotebookLMâ†’Obsidian CF] ë‚´ìš© ê¸¸ì´:', content.length);\n        console.log('[NotebookLMâ†’Obsidian CF] ìƒ˜í”Œ:', content.substring(0, 500));\n\n        return { title, content };\n    }\n\n    /**\n     * Markdown íŒŒì¼ ìƒì„±\n     */\n    function createMarkdown(title, content) {\n        const now = new Date();\n        const dateStr = now.toISOString().split('T')[0];\n        const timeStr = now.toTimeString().split(' ')[0];\n\n        const frontmatter = `---\ncreated: ${dateStr} ${timeStr}\nsource: NotebookLM\ntags: [${CONFIG.autoTags.join(', ')}]\n---\n\n`;\n\n        return frontmatter + `# ${title}\\n\\n${content}`;\n    }\n\n    /**\n     * Obsidianì— ì €ì¥ (fetch ì‚¬ìš©)\n     */\n    async function saveToObsidian(title, markdown) {\n        const now = new Date();\n        const timestamp = now.toISOString().replace(/[:.]/g, '-').split('T')[0];\n        const filename = `${title.replace(/[/\\\\:*?\"<>|]/g, '_')} ${timestamp}.md`;\n        const filepath = `${CONFIG.targetFolder}/${filename}`;\n\n        const url = `${CONFIG.obsidianApiUrl}/vault/${encodeURIComponent(filepath)}`;\n\n        console.log('[NotebookLMâ†’Obsidian CF] ì €ì¥ URL:', url);\n\n        try {\n            const response = await fetch(url, {\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Bearer ${CONFIG.obsidianApiKey}`,\n                    'Content-Type': 'text/markdown'\n                },\n                body: markdown\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            console.log('[NotebookLMâ†’Obsidian CF] âœ… ì €ì¥ ì„±ê³µ:', filename);\n            return filename;\n\n        } catch (error) {\n            console.error('[NotebookLMâ†’Obsidian CF] âŒ ì €ì¥ ì‹¤íŒ¨:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * ë©”ì¸ ì €ì¥ í•¨ìˆ˜\n     */\n    async function handleSaveToObsidian() {\n        try {\n            showNotification('ğŸ“ NotebookLM ë‚´ìš© ì¶”ì¶œ ì¤‘...', 'info');\n\n            const { title, content } = extractNotebookContent();\n\n            if (!content || content.length < 10) {\n                showNotification('âŒ ì¶”ì¶œí•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');\n                return;\n            }\n\n            const markdown = createMarkdown(title, content);\n\n            showNotification('ğŸ’¾ Obsidianì— ì €ì¥ ì¤‘...', 'info');\n            const filename = await saveToObsidian(title, markdown);\n\n            showNotification(`âœ… ì €ì¥ ì™„ë£Œ: ${filename}`, 'success');\n\n        } catch (error) {\n            console.error('[NotebookLMâ†’Obsidian CF] ì˜¤ë¥˜:', error);\n            showNotification(`âŒ ì €ì¥ ì‹¤íŒ¨: ${error.message}`, 'error');\n        }\n    }\n\n    // ========================================\n    // ë²„íŠ¼ ì¶”ê°€\n    // ========================================\n\n    /**\n     * Obsidian ì €ì¥ ë²„íŠ¼ ì¶”ê°€\n     */\n    function addObsidianButton() {\n        if (document.querySelector('#obsidian-save-btn-cf')) {\n            return;\n        }\n\n        const button = document.createElement('button');\n        button.id = 'obsidian-save-btn-cf';\n        button.textContent = 'ğŸ““ Obsidianì— ì €ì¥';\n        button.style.cssText = `\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            padding: 12px 24px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 500;\n            cursor: pointer;\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n            z-index: 9999;\n            font-family: 'Google Sans', Arial, sans-serif;\n            transition: transform 0.2s, box-shadow 0.2s;\n        `;\n\n        button.addEventListener('mouseenter', () => {\n            button.style.transform = 'translateY(-2px)';\n            button.style.boxShadow = '0 6px 16px rgba(102, 126, 234, 0.5)';\n        });\n\n        button.addEventListener('mouseleave', () => {\n            button.style.transform = 'translateY(0)';\n            button.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.4)';\n        });\n\n        button.addEventListener('click', handleSaveToObsidian);\n\n        document.body.appendChild(button);\n        console.log('[NotebookLMâ†’Obsidian CF] ì €ì¥ ë²„íŠ¼ ì¶”ê°€ë¨');\n    }\n\n    // ========================================\n    // ì´ˆê¸°í™”\n    // ========================================\n\n    // CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€\n    const style = document.createElement('style');\n    style.textContent = `\n        @keyframes slideIn {\n            from { transform: translateX(400px); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        @keyframes slideOut {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(400px); opacity: 0; }\n        }\n    `;\n    document.head.appendChild(style);\n\n    // í˜ì´ì§€ ë¡œë“œ í›„ ë²„íŠ¼ ì¶”ê°€\n    function init() {\n        console.log('[NotebookLMâ†’Obsidian CF] ì´ˆê¸°í™” ì‹œì‘');\n        \n        // ë²„íŠ¼ ì¶”ê°€\n        addObsidianButton();\n\n        // MutationObserverë¡œ ë™ì  ë³€ê²½ ê°ì§€\n        const observer = new MutationObserver(() => {\n            addObsidianButton();\n        });\n\n        observer.observe(document.body, {\n            childList: true,\n            subtree: true\n        });\n\n        console.log('[NotebookLMâ†’Obsidian CF] âœ… ì´ˆê¸°í™” ì™„ë£Œ');\n    }\n\n    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì•½ê°„ ì§€ì—° í›„ ì‹¤í–‰\n        setTimeout(init, 1000);\n    }\n\n})();\n"
    }
  ],
  "padding": 5
}